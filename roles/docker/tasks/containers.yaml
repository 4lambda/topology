---
- name: Launch Container(s).
  become: drun
  docker:
    name: "{{ item.name }}"
    env: "{{ item.env }}"
    image: "{{ item.image }}"
    state: reloaded
    pull: always
    ports: "{{ item.port_maps }}"
    volumes: "{{ item.volumes }}"
    restart_policy: on-failure
  with_items: "{{ containers }}"

- name: Set systemd Service File(s).
  template:
    src: docker-x.service
    dest:  "/etc/systemd/system/docker-{{ item.name }}.service"
  with_items: "{{ containers }}"
  notify: ENABLE CONTAINER
