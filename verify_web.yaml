---
- hosts: web
  remote_user: root
  gather_facts: False
  vars_files:
    - ../vvvvv/infra_secrets.yaml
  vars:
    containers:
      - env:
          FOO: bar
        image: registry.gitlab.com/4lambda/web:v1.3.0
        name: 4l-web
        networks:
          - name: 4l_bridge
            ipv4_address: 172.19.1.10
        published_ports:
          - "80:80/tcp"
        volumes:
          - "/opt/4l/nginx/logs:/var/log/nginx"
          - "/etc/pki/4l:/etc/pki/4l:ro"
  roles:
    - docker
